[⏏️ 메인으로](https://github.com/IgnacioSEO/TIL#today-i-learned-til)

# 암호화의 종류

# 1. 단방향 암호화

## 1-1. 단방향 암호화란?

#### 단방향 암호화는 평문을 암호화 할 수는 있지만 암호화된 문자를 다시 평문으로 즉, 복호화가 불가능한 암호화 방법입니다. 주로 해시 알고리즘을 이용하여 단방향 암호화를 구현 합니다. 단방향 암호화를 사용하는 주된 이유는 메시지 또는 파일의 무결성(integrity)을 보장하기 위해서 입니다. 원본의 값이 1bit라도 달라지게 되면 해시 알고리즘을 통과한 후의 해시값이 매우 높은 확률로 달라 집니다. 이를 통해 메시지나 파일이 원본인지 아닌지 확인 할 수 있습니다.

#### 해시의 무결성을 보장하는 특징을 이용하여 저자서명, 파일 또는 데이터의 식별자, 사용자의 비밀번호, 블록체인 등에서 활용되고 있습니다.

#### 대표적인 해시 알고리즘으로는 MD5, SHA 등이 있습니다.

<center>
<img width="904" alt="Screenshot 2022-11-07 at 4 10 13 PM" src="https://user-images.githubusercontent.com/112772324/200246773-f82f2061-6dd2-4e64-8806-ec197736a433.png">
</center>

## 1-2. 단방향 암호화의 한계

#### 해시 알고리즘은 동일한 평문에 대해서 항상 동일 해시값을 갖습니다. 따라서 특정 해시 알고리즘에 대해서 어떠한 평문이 어떤한 해시값을 갖는지 알 수가 있습니다. 이런 특징을 이용하여 해시 함수의 해시 값들을 대량으로 정리한 테이블이 존재하며, 이를 레인보우 테이블이라고 부릅니다. 그리고 레이보우 테이블을 이용하여 사용자의 정보를 해킹하는 공격을 레인보우 공격이라고 합니다.

#### 또한 해시 함수는 본래 데이터를 빠르게 검색하기 위해서 탄생 되었습니다. 이러한 해시 함수의 빠른 처리 속도는 공격자에게 오히려 장점이 됩니다. 공격자는 매우 빠른 속도로 임의의 문자열의 해시값과 해킹할 대상의 해시값을 비교하여 대상자를 공격할 수 있습니다. (MD5를 사용한 경우 일반적인 장비를 이용하여 1초당 56억 개의 해시값을 비교할 수 있습니다).

## 1-3. 솔팅(Salting) & 키 스트레칭(Key Stretching)

### 1-3-1. 솔팅(Salting)

#### 솔팅은 단방향 해시 함수를 통해 암호화를 진행 할 때 본래 데이터에 추가적으로 랜덤한 데이터를 더하여 암호화를 진행하는 방식입니다. 원래 데이터에 추가 데이터가 포함 되었기 때문에 원래 데이터의 해시값과 다르게 됩니다.

### 1-3-2. 키 스트레칭(Key Stretching)

#### 단방향 해시값을 계산 한 후, 그 해시값을 또 다시 해시하고 또 이를 반복하는 방식입니다.

#### 최근에는 일반적인 장비로 1초에 50억 개 이상의 해시값을 비교할 수 있지만, 키 스트레칭을 적용하여 동일한 장비에서 1초에 5번 정도만 비교할 수 있습니다. GPU(Graphics Processing Unit)를 사용하더라도 수백에서 수천 번 정도만 비교할 수 있습니다.

<center>
<img width="927" alt="Screenshot 2022-11-07 at 4 13 05 PM" src="https://user-images.githubusercontent.com/112772324/200247239-639b5d0f-ed1a-4cc9-9444-f312c9b84cc1.png">
</center>

# 2. 양방향 암호화 - 대칭키

## 2-1. 대칭키 암호화란?

#### 단방향 암호화와 달리 양방향 암호화는 암호화된 값을 다시 암호화 하기 전의 값으로 복호화가 가능합니다. 양방향 암호화는 암호화 알고리즘과 키(Key)을 이용해서 암호화를 진행 하는데, 이 키를 통해서 암호화된 값을 보호 할 수 있습니다.

#### 대칭키 방식은 암호화를 할 때 사용하는 키와 암호문으로부터 평문을 복호화 할 때 사용하는 키가 동일한 암호 시스템입니다. 따라서 암호화를 진행할 때 사용한 키를 모른다면 해당 암호문은 다시 복호화 할 수 없습니다.

#### 대표적인 대칭키 양방향 알고리즘으로는 AES가 있는데, AES는 128, 192, 256 비트의 정해진 길이의 키를 사용합니다. 암호화 진행시 키의 길이가 길어져 복잡할 수록 암호화도 복잡하게 되지만 ,그 만큼 컴퓨터의 자원이 많이 필요하기 때문에 적절한 길이의 키를 사용해야 됩니다.

<center>
<img width="933" alt="Screenshot 2022-11-07 at 4 15 36 PM" src="https://user-images.githubusercontent.com/112772324/200247634-c39780d5-743a-46bf-9335-7925af0dbf1e.png">
</center>

## 2-2. 대칭키 암호화의 한계

#### 대칭키 방식은 하나의 키를 이용하므로 다른 사람과 대칭키 기반으로 암호화 통신을 할 경우 상대방도 사전에 같은 키를 갖고 있어야 합니다. 이 때, 키를 주고 받는 과정에서 키가 중간에 유출될 우려가 있고, 이로 인해 암호화 통신을 해킹 당할 수 있습니다. 특히 여러 상대방과 통신할 경우 각각의 키를 관리하는 것은 더욱 어려워 진다는 단점이 있습니다.

# 3. 양방향 암호화 - 비대칭키

## 3-1. 비대칭키 암호화란?

#### 비대칭키 암호화 또한 암호화와 복호화 모두 가능하며, 암호화를 진행 할 때 키를 이용합니다. 다만, 대칭키 암호화에서는 암호화하는 키와 복호화하는 키가 동일 했다면, 비대칭키 암호화에서는 암호화 때 사용하는 키와 복호화 할 때 사용하는 키를 다르게 사용합니다. 일반적으로 다른 사람들에게 공개하는 Public Key와 절대 노출을 하지 않는 Private Key가 있으며, 이 두 개의 키를 Key Pair라고 부릅니다. 비대칭키 암호화는 암호화하는 키와 복호화 하는 키를 구분하여 대칭키 암호화의 고질적인 문제였던 키의 탈취 또는 관리의 단점 부분을 보완 할 수 있습니다.

<center>
<img width="918" alt="Screenshot 2022-11-07 at 4 17 32 PM" src="https://user-images.githubusercontent.com/112772324/200247916-c67d207d-13df-4a00-9c84-2f9c94febeee.png">
</center>

## 3-2. 데이터 암호화

#### 비대칭키 암호화는 암호화하는 키와 복호화 하는 키가 다르기 때문에 대칭키 방식에서 문제가 되는 키 노출에 대한 문제를 해결 할 수 있습니다. 사용자가 서버로 비대칭키 방식을 이용하여 데이터를 보내는 과정을 살펴보겠습니다.

#### 서버에 Key Pair 발급 후 Public Key 사용자에게 전달 합니다.

#### 사용자는 데이터를 암호화 할 때 서버에서 받은 Public Key을 사용 합니다.

#### 서버는 사용자가 보낸 암호화된 데이터를 Private Key로 복화화 하여 내용을 확인 합니다.

#### 이 과정에서 해커가 이미 Public Key를 훔쳤었고, 사용자가 서버로 데이터를 보낼 때 데이터 또한 중간에 가져간다고 해도 해커는 해당 데이터를 확인할 수 없습니다. 사용자가 Public Key로 암호화 한 데이터는 서버가 가지고 있는 Private Key로만 복호화가 가능하기 때문입니다. 따라서 Public Key 어디에도 공개돼도 되지만, Private Key 절대 공개 돼서는 안 됩니다.

## 3-3. 전자 서명

#### 전자서명은 종이문서의 서명(인감)과 같이 전자문서에 서명한 사람이 누구이지 확인하고 서명된 전자문서의 위·변조사실을 알 수 있도록 전자문서에 부착하는 특수한 형태의 디지털 정보를 말합니다. 전자서명은 비대칭키 암호화를 통해 구현 할 수 있습니다. 비대칭 암호화의 Key Pair가 종이문서의 인감도장과 인감증명의 역할을 하게 됩니다. Private Key(인감도장)는 서명자만 보관해서 사용하고, 공개된 Private Key(임감증명) 통해 서명이 진짜인지 아닌지를 판단 할 수 있습니다.

#### 비대칭키를 이용한 전자서명 과정을 자세히 살펴보면 다음과 같습니다.

#### A가 Key Pair 발급 후 Public Key 공개 합니다.

#### A가 메시지를 작성하고, 본인의 전자 서명을 기입 합니다.

#### 전사 서명은 A가 작성한 메시지의 내용을 Private Key로 암호화한 값입니다.

#### A의 메시지를 받은 B가 해당 메시지가 정말 A가 보낸 메시지인지 확인하고 싶습니다.

#### B는 공개된 A의 Publick Key를 가지고 전달 받은 전자서명을 복호화 합니다.

#### 복호화의 내용과 메시지의 내용일 일치하면 A가 작성한 메시지라는 것을 확신 할 수 있습니다.

# 4. Summary

#### 단방향 암호화는 해시 알고리즘을 사용하여 암호화는 가능하지만 복호화는 불가능한 암호화 방법입니다.

#### 솔팅(Salting)과 키 스트레칭(Key Stretching) 기법을 이용하여 단방향 암호화의 단점을 보안 할 수 있습니다.

#### 양방향 암호화에는 대칭키 방식과 비대칭키 방식이 존재하며 암호화와 복호화를 진행 할 때 Key를 이용합니다.

#### 대칭키 방식의 양방향 암호화는 암호화와 복호화에 동일한 Key를 사용하며, Key가 노출 될 경우 보안에 취약합니다.

#### 비대칭키 방식의 양방향 암호화는 암호화와 복호화에 서로 다른 Key를 사용하며, 대칭키 방식의 문제였던 Key 노출 문제를 해결할 수 있습니다.

[⏏️ 메인으로](https://github.com/IgnacioSEO/TIL#today-i-learned-til)
